# 今後の作業計画 (Next Steps)

更新日: 2025年8月28日

## 1. 現状のサマリー

- **ブラウザ版PDF→CSV変換ツール (`index.html`) は完成済み。**
  - Gemini APIを利用して、ブラウザ上でPDFをアップロードし、内容をCSV形式で取得できる。
- **上記ツールに関する完全なドキュメントも作成済み。**
  - `README.md`: ツールの概要や使い方
  - `docs/GEMINI_API_GUIDE.md`: APIキーの取得からプロジェクトの作成・削除までを網羅した完全ガイド
- **ただし、これらのドキュメントはまだリポジトリにコミットしていない。**
  - すべての作業が完了した後に、最終的にコミットを行うため、現在は保留中。

---

## 2. 経緯：なぜPythonスクリプト作成を検討しているか

1.  `失敗作`ディレクトリにあった古いPythonスクリプト (`OCR_to_CSV_COnverter.py`) をレビューした。
2.  この古いスクリプトは、旧来の「Google Cloud Vision API」でPDFから文字を抽出し、その後、複雑なプログラム（正規表現）でテキストを解析しようとしていた。この方法は、請求書のフォーマットが少しでも変わると対応できなくなる、柔軟性の低いアプローチだった。
3.  そこで、現在の`index.html`（ブラウザ版）と、新しいPythonスクリプト版のメリット・デメリットを比較検討した。

    - **ブラウザ版の長所:** 誰でも手軽に使える。視覚的で分かりやすい。
    - **Python版の長所:** 大量のPDFファイルを一括で自動処理できる。他のシステムとの連携が可能。

4.  **結論として、「自動化・大量処理」を視野に入れるのであれば、Pythonスクリプトを作成する価値がある、という点で合意した。**

5.  また、Pythonスクリプトの作り方についても検討し、古いスクリプトのような「AIに文字起こしだけさせて、解析はプログラムで頑張る」方法ではなく、**「AIにPDFの解析から構造化まで全てを任せる（AI完結型）」方が、柔軟性・将来性が高く、圧倒的に優れている**という点でも合意した。

---

## 3. 次のステップ：Pythonスクリプトの作成

上記経緯を踏まえ、次回以降、以下の仕様で新しいPythonスクリプトの作成に着手する。

- **目的:** 自動化・大量処理を可能にするPDF→CSV変換スクリプトを作成する。
- **ファイル名:** `pdf_to_csv_converter.py` （仮）
- **アーキテクチャ:** AI完結型
- **実行方法:** コマンドラインから実行
- **引数:**
  - **第1引数:** 処理したいPDFファイルのパス
  - **第2引数:** AIへの指示を記述したプロンプトファイルのパス
- **APIキーの取り扱い:**
  - セキュリティを考慮し、環境変数 `GEMINI_API_KEY` から読み込む方式を採用する。
- **出力:**
  - `output.csv` のようなCSVファイルを生成する。

次回、この仕様に基づいた詳細な打ち合わせから再開する。
